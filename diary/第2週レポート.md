# 第２週レポート

## 行ったこと
今週も主にメールで送っていただいた内容を元に実装していました。プログラムはノートブック形式(ipynb)で書いています。
プログラムのリンクはコチラ ↓
1. ミラーごとに複数の楕円作成へ 
https://github.com/Hirochon/laboratory/blob/master/ellipses/make_ellipse_v2.ipynb
2. 1つの楕円を回転させる 
https://github.com/Hirochon/laboratory/blob/master/ellipses/make_rotate_ellipse_v1.ipynb
3. ミラーごとに複数の楕円をそれぞれ回転させる 
https://github.com/Hirochon/laboratory/blob/master/ellipses/make_ellipse_v3.ipynb

**今回のレポートでは前回との変更点を記述していきます**

### 1. ミラーごとに複数楕円を作成するプログラムへのバージョンアップする

#### 1-1. import類

```python: import.py
from tqdm import
```

`tqdm`はプログレスバーを表示してくれるライブラリです。処理に時間がかかってきそうなので、いまのうちに追加しました。

#### 1-2. 楕円作成関数の引数に一部リスト型へ変更と楕円の数を追加

```python: make_elip.py
def make_elip_spot_mirror(elip_len_x_list, elip_len_y_list, coor_x_list, coor_y_list, axis_x, axis_y, ellipse_num):
```

1. ミラーごとに関数を適応する仕様に変更
2. 楕円に関する引数を複数取り出す必要があったので、以下の引数についてリスト化
    - elip_len_x
    - elip_len_y
    - coor_x
    - coor_y
3. 楕円の数だけ処理を回す必要があるので、楕円の数を引数に追加
    - ellipse_num: 楕円の数

#### 1-3. パラメータの作成関数を追加
1. `楕円の数`、`楕円の縦横の長さ`、`楕円の位置`に関してランダムに位置を指定するような関数を作成
2. 今は以下の条件を設定しています。
    - 楕円の数: 1~10 (個)
    - 楕円の縦横の長さ: 1~100
    - 楕円の位置: 1~100
3. 返り値について以下を返します。
    1. パラメータリスト(ミラーの数×楕円の数: パラメータ)
    2. 楕円の数リスト(ミラーの数: 楕円の数)

#### 1-4. その他パラメータの初期化について
1. `dat`をミラーを格納するリストへ変更。
2. `dat_num`はミラーの数を指定します。

#### 1-5. 主要処理部分のforについて
1. まず`param_list`と`ellipse_nums`のリストをzipで渡しています
2. `tqdm`を使って時間と進歩を可視化できるようにしています。total引数はミラー数を渡しています。
3. forのリストで受け取る部分でミラー毎と楕円毎でリスト展開のタイミングが違うものが存在するので、`param_list`は[]をつかって中身を受け取っています。

#### 1-6. 図の描画について
1. ミラーごとに複数表示できるようにしました。
2. `add_subplot`で表示するミラー数を弄れます！(必ず`ミラー格の数`<`表示する数`としてください)

### 2. 楕円回転プログラムについて
いきなり実装するとバグりやすいのでとりあえず１個の楕円で作成

#### 2-1. 楕円の回転について

```python: rotate.py
theta = np.pi*np.random.rand()*2
rotate = np.array([[np.cos(theta),np.sin(theta)],[-np.sin(theta), np.cos(theta)]])
                        .
                        .
                        .
        [X, Y] = np.dot([x-coor_x, y-coor_y], rotate)
```

1. θをランダムで作成
2. 回転行列を定義
3. 回転行列の積使って、θの分だけ回転
